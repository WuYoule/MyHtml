<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>（测试了，没有效果）</title>
    <script>

        function updateOnlineStatus(msg){
            var status=document.getElementById("status");
            var condition=navigator.onLine?"在线":"离线";
            alert(condition);
            status.setAttribute("class",condition);
            var state=document.getElementById("state");
            state.innerHTML=condition;
            var log=document.getElementById("log");
            log.appendChild(document.createTextNode("Event:"+msg+";status="+condition+"\n"));


        }

        function loaded(){
            updateOnlineStatus("load");
            document.body.addEventListener("offline",function(){
                updateOnlineStatus("offline");

            },false);
            document.body.addEventListener("online",function(){
                updateOnlineStatus("online");
            },false);

        }
    </script>
</head>
<body onload="loaded()">
<div id="status"><p id="state"></p></div>
<div id="log"></div>
</body>
</html>